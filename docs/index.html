<!DOCTYPE html>
<html lang="en">
<head>
    <script type="module">
  import { dragonScimitar, trout, emptyBucket, toDataUrl, iconNames, flipCursor } from 'https://unpkg.com/@dava96/osrs-icons/dist/esm/index.js';


  const results = iconNames.filter(icon => icon.includes('bucket'));
  console.log(results);
  document.querySelector('body').style.cursor = await flipCursor(dragonScimitar);

  const style = document.createElement('style');
  style.textContent = `a, button, [role="button"], .run-link { cursor: ${trout}; }`;
  document.head.appendChild(style);

  const faviconUrl = toDataUrl(emptyBucket);
  const link = document.createElement('link');
  link.rel = 'icon';
  link.href = faviconUrl;
  document.head.appendChild(link);

</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSRS Wiki Bucket Builder â€” Documentation</title>
    <meta name="description" content="A strictly typed, zero-dependency TypeScript query builder for the Old School RuneScape Wiki Bucket API.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <style>
        :root {
            --bg: #0d1117;
            --surface: #161b22;
            --border: #30363d;
            --text: #e6edf3;
            --text-muted: #8b949e;
            --accent: #58a6ff;
            --accent-hover: #79c0ff;
            --green: #3fb950;
            --code-bg: #1c2128;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;

        }

        .container {
            max-width: 860px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
        }

        header {
            text-align: center;
            padding: 3rem 0 2rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        header h1 span { color: var(--accent); }

        header p {
            color: var(--text-muted);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .badges {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.3rem 0.7rem;
            border-radius: 2rem;
            font-size: 0.8rem;
            font-weight: 600;
            background: var(--surface);
            border: 1px solid var(--border);
            color: var(--text-muted);
        }

        .badge.green { color: var(--green); border-color: #23472850; }
        .badge.blue { color: var(--accent); border-color: #1f6feb50; }

        h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 2.5rem 0 1rem;
            padding-bottom: 0.4rem;
            border-bottom: 1px solid var(--border);
        }

        h3 {
            font-size: 1.15rem;
            font-weight: 600;
            margin: 2rem 0 0.75rem;
            color: var(--accent);
        }

        h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 1.5rem 0 0.5rem;
            color: var(--text);
        }

        p { margin-bottom: 0.75rem; }

        a {
            color: var(--accent);
            text-decoration: none;
        }
        a:hover { color: var(--accent-hover); text-decoration: underline; }

        .run-link {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            margin: 0.5rem 0 1.5rem;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            background: #1f6feb20;
            border: 1px solid #1f6feb40;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent);
            transition: background 0.15s, border-color 0.15s;
        }
        .run-link:hover {
            background: #1f6feb35;
            border-color: var(--accent);
            text-decoration: none;
        }

        pre {
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem 1.25rem;
            overflow-x: auto;
            margin-bottom: 0.75rem;
            font-size: 0.88rem;
            line-height: 1.5;
        }

        code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 0.88em;
        }

        :not(pre) > code {
            background: var(--code-bg);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            border: 1px solid var(--border);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0 1.5rem;
        }
        th, td {
            text-align: left;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border);
        }
        th {
            background: var(--surface);
            font-weight: 600;
        }

        .concept-box {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.25rem 1.5rem;
            margin: 1rem 0 1.5rem;
        }
        .concept-box p:last-child { margin-bottom: 0; }

        @media (max-width: 640px) {
            .container { padding: 1rem; }
            header h1 { font-size: 1.6rem; }
            pre { font-size: 0.8rem; padding: 0.75rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span>OSRS Wiki</span> Bucket Builder</h1>
            <p>A strictly typed, zero-dependency TypeScript query builder for the Old School RuneScape Wiki Bucket API.</p>
            <div class="badges">
                <span class="badge green">âœ“ 100% Type Safe</span>
                <span class="badge blue">âš¡ Zero Dependencies</span>
                <span class="badge">ðŸ“¦ ESM Ready</span>
            </div>
        </header>

        <div class="install-block">
            <pre><code class="language-bash">npm install @dava96/osrs-wiki-bucket-builder</code></pre>
        </div>

        <!-- ================================================================ -->
        <!-- QUICK START                                                      -->
        <!-- ================================================================ -->
        <h2>Quick Start</h2>
        <pre><code class="language-typescript">import { bucket, BucketResponse } from '@dava96/osrs-wiki-bucket-builder';
import type { InferBucketResult } from '@dava96/osrs-wiki-bucket-builder';

const query = bucket('exchange')
    .select('id', 'name', 'value')
    .where('name', 'Abyssal whip');

// .toUrl() generates the full API URL, ready to fetch
const raw = await fetch(query.toUrl()).then(r => r.json());

// BucketResponse.from() infers the result type from the query
const response = BucketResponse.from(query, raw);
const whip = response.first();
console.log(whip?.name);  // âœ… typed as string
console.log(whip?.value); // âœ… typed as number</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27id%27,%20%27name%27,%20%27value%27).where({%20%27name%27,%20%27Abyssal%20whip%27%20}).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <!-- ================================================================ -->
        <!-- CORE CONCEPTS                                                    -->
        <!-- ================================================================ -->
        <h2>Core Concepts</h2>
        <div class="concept-box">
            <p><strong>What are Buckets?</strong> Buckets are structured data tables exposed by the OSRS Wiki through the <a href="https://meta.weirdgloop.org/w/Extension:Bucket/Usage" target="_blank" rel="noopener">Bucket extension</a>. Each bucket (e.g. <code>exchange</code>, <code>infobox_item</code>, <code>storeline</code>) contains rows and fields, similar to a SQL table.</p>
            <p><strong>What does this library do?</strong> It provides a fluent TypeScript API that generates the Lua query strings the Wiki API expects. You chain methods like <code>.select()</code>, <code>.where()</code>, and <code>.join()</code>, and the builder outputs a correctly formatted Lua string. It never makes network requests â€” you handle fetching yourself.</p>
            <p><strong>How does type safety work?</strong> A sync script fetches the schema of every bucket from the Wiki and generates TypeScript interfaces. Your IDE will autocomplete bucket names and catch invalid field references at compile time.</p>
        </div>

        <!-- ================================================================ -->
        <!-- GUIDE                                                            -->
        <!-- ================================================================ -->
        <h2>Guide</h2>

        <h3>Selecting Fields</h3>
        <p>Use <code>.select()</code> to pick which fields to retrieve. Supports wildcards (<code>*</code>, <code>alias.*</code>) which are expanded client-side into explicit field lists.</p>
        <pre><code class="language-typescript">const query = bucket('exchange')
    .select('name', 'value', 'limit')
    .limit(5)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27,%20%27limit%27).limit(5).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h3>Filtering with Where</h3>
        <p>The <code>.where()</code> method supports equality, comparison operators, and chaining for implicit AND.</p>

        <h4>Equality (implicit <code>=</code>)</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .where('name', 'Dragon scimitar')
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where({%20%27name%27,%20%27Dragon%20scimitar%27%20}).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4>Comparison Operators</h4>
        <p>Supported: <code>=</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code></p>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .where('value', '>', 1000000)
    .limit(10)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where({%20%27value%27,%20%27%3E%27,%201000000%20}).limit(10).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h3>Convenience Filters</h3>

        <h4><code>.whereNot(field, value)</code> â€” exclude matches</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .whereNot('name', 'Coins')
    .where('value', '>', 0)
    .limit(10)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where({%20%27name%27,%20%27!=%27,%20%27Coins%27%20}).where({%20%27value%27,%20%27%3E%27,%200%20}).limit(10).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4><code>.whereNull()</code> / <code>.whereNotNull()</code> â€” null checks</h4>
        <pre><code class="language-typescript">bucket('infobox_item')
    .select('item_name', 'weight')
    .whereNotNull('weight')
    .limit(10)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27infobox_item%27).select(%27item_name%27,%20%27weight%27).where({%20%27weight%27,%20%27!=%27,%20bucket.Null()%20}).limit(10).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4><code>.whereBetween(field, [min, max])</code> â€” inclusive range</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .whereBetween('value', [10000, 100000])
    .limit(10)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where({%20%27value%27,%20%27%3E=%27,%2010000%20}).where({%20%27value%27,%20%27%3C=%27,%20100000%20}).limit(10).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4><code>.whereIn(field, values)</code> â€” match any value</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .whereIn('name', ['Bronze axe', 'Iron axe', 'Steel axe'])
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where(bucket.Or({%20%27name%27,%20%27Bronze%20axe%27%20},%20{%20%27name%27,%20%27Iron%20axe%27%20},%20{%20%27name%27,%20%27Steel%20axe%27%20})).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h3>Combining Conditions</h3>
        <p>For complex logic, use the <code>Bucket</code> helper object:</p>
        <pre><code class="language-typescript">import { bucket, Bucket } from '@dava96/osrs-wiki-bucket-builder';</code></pre>

        <h4><code>Bucket.Or(...)</code> â€” match any condition</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .where(Bucket.Or(
        ['name', 'Bronze axe'],
        ['name', 'Iron axe'],
        ['name', 'Steel axe']
    ))
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where(bucket.Or({%20%27name%27,%20%27Bronze%20axe%27%20},%20{%20%27name%27,%20%27Iron%20axe%27%20},%20{%20%27name%27,%20%27Steel%20axe%27%20})).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4><code>Bucket.And(...)</code> â€” all conditions must match</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .where(Bucket.And(
        ['value', '>', 1000],
        ['value', '<', 50000]
    ))
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where(bucket.And({%20%27value%27,%20%27%3E%27,%201000%20},%20{%20%27value%27,%20%27%3C%27,%2050000%20})).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4><code>Bucket.Not(...)</code> â€” negate a condition</h4>
        <pre><code class="language-typescript">bucket('exchange')
    .select('name', 'value')
    .where(Bucket.Not(['name', 'Coins']))
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where(bucket.Not({%20%27name%27,%20%27Coins%27%20})).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4><code>Bucket.Null()</code> â€” represents a null value</h4>
        <pre><code class="language-typescript">bucket('infobox_item')
    .select('item_name', 'weight')
    .where('weight', '!=', Bucket.Null())
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27infobox_item%27).select(%27item_name%27,%20%27weight%27).where({%20%27weight%27,%20%27!=%27,%20bucket.Null()%20}).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h3>Joining Buckets</h3>
        <p>Join two or more buckets to combine data from different sources, similar to a SQL JOIN.</p>

        <h4>Basic join</h4>
        <pre><code class="language-typescript">bucket('infobox_item')
    .join('exchange', 'item_name', 'name')
    .select('item_name', 'weight', 'exchange.value')
    .limit(5)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27infobox_item%27).join(%27exchange%27,%20%27infobox_item.item_name%27,%20%27exchange.name%27).select(%27item_name%27,%20%27weight%27,%20%27exchange.value%27).limit(5).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4>Join with alias</h4>
        <p>Aliases are resolved to real bucket names in the generated Lua:</p>
        <pre><code class="language-typescript">bucket('infobox_item')
    .join('exchange', 'ex', 'item_name', 'name')
    .select('item_name', 'ex.value', 'ex.limit')
    .where('ex.value', '>', 100000)
    .limit(10)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27infobox_item%27).join(%27exchange%27,%20%27infobox_item.item_name%27,%20%27exchange.name%27).select(%27item_name%27,%20%27exchange.value%27,%20%27exchange.limit%27).where({%20%27exchange.value%27,%20%27%3E%27,%20100000%20}).limit(10).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h4>Multiple joins</h4>
        <p>Join three buckets to combine item info, GE prices, and shop data:</p>
        <pre><code class="language-typescript">bucket('infobox_item')
    .join('exchange', 'item_name', 'name')
    .join('storeline', 'item_name', 'sold_item')
    .select(
        'item_name', 'weight',
        'exchange.value',
        'storeline.sold_by', 'storeline.store_sell_price'
    )
    .limit(5)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27infobox_item%27).join(%27exchange%27,%20%27infobox_item.item_name%27,%20%27exchange.name%27).join(%27storeline%27,%20%27infobox_item.item_name%27,%20%27storeline.sold_item%27).select(%27item_name%27,%20%27weight%27,%20%27exchange.value%27,%20%27storeline.sold_by%27,%20%27storeline.store_sell_price%27).limit(5).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <h3>Ordering &amp; Pagination</h3>

        <h4><code>.orderBy(field, direction)</code></h4>
        <p>Sort by a selected field. The field must appear in a prior <code>.select()</code> call.</p>

        <h4><code>.paginate(page, perPage)</code></h4>
        <p>A helper that computes <code>.limit()</code> and <code>.offset()</code> from a 1-based page number:</p>
        <pre><code class="language-typescript">const page2 = bucket('exchange')
    .select('name', 'value')
    .where('value', '>', 0)
    .orderBy('value', 'desc')
    .paginate(2, 25)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27exchange%27).select(%27name%27,%20%27value%27).where({%20%27value%27,%20%27%3E%27,%200%20}).orderBy(%27value%27,%20%27desc%27).limit(25).offset(25).run()" target="_blank" rel="noopener">â–¶ Run page 2</a>

        <h4><code>.first()</code></h4>
        <p>Shorthand for <code>.limit(1)</code> â€” grab just the top result:</p>
        <pre><code class="language-typescript">const top = bucket('exchange')
    .select('name', 'value')
    .orderBy('value', 'desc')
    .first()
    .run();</code></pre>

        <h3>Conditional Logic â€” <code>.when()</code></h3>
        <p>Conditionally apply query modifications based on runtime values:</p>
        <pre><code class="language-typescript">const isMembers = true;
const query = bucket('infobox_item')
    .select('item_name', 'value', 'members')
    .when(isMembers, (q) => q.where('members', true))
    .limit(10)
    .run();</code></pre>

        <h3>Reusing Queries â€” <code>.clone()</code></h3>
        <p>Creates an independent deep copy. Changes to the clone don't affect the original:</p>
        <pre><code class="language-typescript">const base = bucket('exchange')
    .select('name', 'value')
    .where('value', '>', 0);

const topExpensive = base.clone().orderBy('value', 'desc').limit(5);
const topCheap = base.clone().orderBy('value', 'asc').limit(5);</code></pre>

        <!-- ================================================================ -->
        <!-- EXECUTING QUERIES                                                -->
        <!-- ================================================================ -->
        <h2>Executing Queries</h2>

        <h4><code>.run()</code> â€” URL-encoded output (default)</h4>
        <pre><code class="language-typescript">const query = bucket('exchange').select('name', 'value').run();
const url = `https://oldschool.runescape.wiki/api.php?action=bucket&format=json&query=${query}`;</code></pre>

        <h4><code>.run({ encodeURI: false })</code> â€” raw Lua output</h4>
        <pre><code class="language-typescript">const lua = bucket('exchange').select('name', 'value').run({ encodeURI: false });
// bucket('exchange').select('name', 'value').run()</code></pre>

        <h4><code>.printSQL()</code> â€” raw Lua string</h4>
        <p>Equivalent to <code>.run({ encodeURI: false })</code>:</p>
        <pre><code class="language-typescript">const lua = bucket('exchange').select('name', 'value').printSQL();</code></pre>

        <h4><code>BucketResponse</code> â€” response wrapper</h4>
        <p>Wraps the raw API response with convenient accessors:</p>
        <pre><code class="language-typescript">import { bucket, BucketResponse } from '@dava96/osrs-wiki-bucket-builder';

const query = bucket('exchange').select('name', 'value').first();
const raw = await fetch(query.toUrl()).then(r => r.json());
const response = new BucketResponse(raw);

response.results  // Array of matching rows
response.first()  // First result or undefined
response.query    // The Lua query echoed by the API
response.error    // Error message if the query failed</code></pre>

        <h4><code>BucketResponse.from()</code> â€” typed responses from queries</h4>
        <p>Automatically infers the result type from the query builder â€” no manual type parameter needed:</p>
        <pre><code class="language-typescript">const query = bucket('exchange').select('name', 'value');
const raw = await fetch(query.toUrl()).then(r => r.json());
const response = BucketResponse.from(query, raw);

response.first()?.name;  // âœ… typed as string
response.first()?.value; // âœ… typed as number</code></pre>

        <h4><code>InferBucketResult</code> â€” extract the result type</h4>
        <p>Use <code>InferBucketResult&lt;typeof query&gt;</code> to extract the inferred row type without executing the query:</p>
        <pre><code class="language-typescript">import type { InferBucketResult } from '@dava96/osrs-wiki-bucket-builder';

const query = bucket('exchange').select('id', 'name', 'value');
type ExchangeRow = InferBucketResult&lt;typeof query&gt;;
// { id: number; name: string; value: number; page_name: string; page_name_sub: string }</code></pre>

        <h4><code>.toUrl()</code> â€” generate the full API URL</h4>
        <p>Generates the complete Wiki API URL, ready to pass to <code>fetch()</code>:</p>
        <pre><code class="language-typescript">const url = bucket('exchange')
    .select('name', 'value')
    .where('value', '>', 100000)
    .limit(10)
    .toUrl();

const data = await fetch(url).then(r => r.json());</code></pre>

        <hr>

        <!-- ================================================================ -->
        <!-- FULL EXAMPLE                                                     -->
        <!-- ================================================================ -->
        <h2>Full Example</h2>
        <p>Multi-join with aliases, mixed conditions, ordering, and pagination â€” all in one query:</p>
        <pre><code class="language-typescript">import { bucket, Bucket } from '@dava96/osrs-wiki-bucket-builder';

const query = bucket('infobox_item')
    .join('exchange', 'ex', 'item_name', 'name')
    .join('storeline', 'shop', 'item_name', 'sold_item')
    .select(
        'item_name', 'weight',
        'ex.value', 'ex.limit',
        'shop.sold_by', 'shop.store_sell_price'
    )
    .where('ex.value', '>', 1000)
    .whereNotNull('shop.sold_by')
    .orderBy('ex.value', 'desc')
    .limit(10)
    .run();</code></pre>
        <a class="run-link" href="https://oldschool.runescape.wiki/api.php?action=bucket&query=bucket(%27infobox_item%27).join(%27exchange%27,%20%27infobox_item.item_name%27,%20%27exchange.name%27).join(%27storeline%27,%20%27infobox_item.item_name%27,%20%27storeline.sold_item%27).select(%27item_name%27,%20%27weight%27,%20%27exchange.value%27,%20%27exchange.limit%27,%20%27storeline.sold_by%27,%20%27storeline.store_sell_price%27).where({%20%27exchange.value%27,%20%27%3E%27,%201000%20}).where({%20%27storeline.sold_by%27,%20%27!=%27,%20bucket.Null()%20}).orderBy(%27exchange.value%27,%20%27desc%27).limit(10).run()" target="_blank" rel="noopener">â–¶ Run this query</a>

        <hr>

        <!-- ================================================================ -->
        <!-- API REFERENCE                                                    -->
        <!-- ================================================================ -->
        <h2>API Reference</h2>
        <table>
            <thead>
                <tr><th>Method</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>bucket(name)</code></td><td>Creates a new query builder for the given bucket</td></tr>
                <tr><td><code>.select(...fields)</code></td><td>Picks fields to retrieve. Supports dot-notation and wildcards</td></tr>
                <tr><td><code>.where(field, value)</code></td><td>Filters by equality</td></tr>
                <tr><td><code>.where(field, op, value)</code></td><td>Filters with a comparison operator</td></tr>
                <tr><td><code>.whereNot(field, value)</code></td><td>Shorthand for <code>.where(field, '!=', value)</code></td></tr>
                <tr><td><code>.whereNull(field)</code></td><td>Filters for NULL values</td></tr>
                <tr><td><code>.whereNotNull(field)</code></td><td>Filters for non-NULL values</td></tr>
                <tr><td><code>.whereBetween(field, [a, b])</code></td><td>Inclusive range filter</td></tr>
                <tr><td><code>.whereIn(field, values)</code></td><td>Matches any value from the list</td></tr>
                <tr><td><code>.join(bucket, src, target)</code></td><td>Joins another bucket</td></tr>
                <tr><td><code>.join(bucket, alias, src, target)</code></td><td>Joins with an alias</td></tr>
                <tr><td><code>.orderBy(field, direction)</code></td><td>Sorts by <code>'asc'</code> or <code>'desc'</code></td></tr>
                <tr><td><code>.limit(n)</code></td><td>Sets max rows (1â€“5000, default 500)</td></tr>
                <tr><td><code>.offset(n)</code></td><td>Sets row offset for pagination</td></tr>
                <tr><td><code>.paginate(page, perPage)</code></td><td>Computes limit/offset from page number</td></tr>
                <tr><td><code>.first()</code></td><td>Shorthand for <code>.limit(1)</code></td></tr>
                <tr><td><code>.when(cond, fn)</code></td><td>Conditionally applies <code>fn</code></td></tr>
                <tr><td><code>.clone()</code></td><td>Deep copies the builder</td></tr>
                <tr><td><code>.run(options?)</code></td><td>Returns the Lua query string (URI-encoded by default)</td></tr>
                <tr><td><code>.printSQL()</code></td><td>Returns the raw Lua query string</td></tr>
                <tr><td><code>.toUrl()</code></td><td>Generates the full Wiki API URL, ready to <code>fetch()</code></td></tr>
            </tbody>
        </table>

        <h3>Bucket Helpers</h3>
        <table>
            <thead>
                <tr><th>Helper</th><th>Description</th></tr>
            </thead>
            <tbody>
                <tr><td><code>Bucket.And(...conditions)</code></td><td>Logical AND</td></tr>
                <tr><td><code>Bucket.Or(...conditions)</code></td><td>Logical OR</td></tr>
                <tr><td><code>Bucket.Not(condition)</code></td><td>Logical NOT</td></tr>
                <tr><td><code>Bucket.Null()</code></td><td>Represents a NULL value</td></tr>
            </tbody>
        </table>

        <h2>Resources</h2>
        <p>
            <a href="https://meta.weirdgloop.org/w/Extension:Bucket/Usage" target="_blank" rel="noopener">Bucket Usage Guide</a> Â·
            <a href="https://meta.weirdgloop.org/w/Extension:Bucket/Api" target="_blank" rel="noopener">Bucket API</a> Â·
            <a href="https://oldschool.runescape.wiki/w/Special:AllPages?from=&to=&namespace=9592" target="_blank" rel="noopener">Browse All Buckets</a> Â·
            <a href="https://github.com/Dava96/osrs-wiki-bucket-builder" target="_blank" rel="noopener">GitHub</a> Â·
            <a href="https://github.com/Dava96/osrs-icons" target="_blank" rel="noopener">Icons Provided by osrs-icons</a>
        </p>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/lua.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>
